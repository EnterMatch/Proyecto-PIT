<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="IncidenciaMapper">
 	
 	<resultMap type="incidenciaModel" id="incidenciaResultMap">
 		<id property="idIncidencia" column="id_incidencia"/>
 		<result property="descripIncidencia" 	column="descrip_incidencia"/>
 		<result property="fecIngIncidencia" 	column="fec_ing_incidencia"/>
 		<result property="resumenIncidencia" 	column="resumen_incidencia"/>
 		<result property="solucionIncidencia" 	column="solucion_incidencia"/>
 		<result property="idCliente" 			column="id_cliente"/>
 		<result property="idGrupo" 				column="id_grupo"/>
 		<result property="idOperador" 			column="id_operador"/>
 		<result property="idEmpleado" 			column="id_empleado"/>
 		<result property="idEstado" 			column="id_estado"/>
 		<result property="idPrioridad" 			column="id_prioridad"/>
 	</resultMap>

	<insert id="create" parameterType="incidenciaModel" statementType="CALLABLE">
	 {call USP_TB_INCIDENCIA_CREATE(#{idIncidencia, mode=OUT, jdbcType=NUMERIC},#{descripIncidencia},#{fecIngIncidencia},#{resumenIncidencia},#{solucionIncidencia},#{idCliente},#{idGrupo},#{idOperador},#{idEmpleado},#{idEstado},#{idPrioridad})}
	</insert>
	<select id = "read" resultMap = "incidenciaResultMap">
	{call USP_TB_INCIDENCIA_READ () }
	</select>
	<update id="update" parameterType="incidenciaModel">
	{call USP_TB_INCIDENCIA_UPDATE(#{idIncidencia},#{descripIncidencia},#{fecIngIncidencia},#{resumenIncidencia},#{solucionIncidencia},#{idCliente},#{idGrupo},#{idOperador},#{idEmpleado},#{idEstado},#{idPrioridad})}
	</update>
	<delete id="delete" parameterType="int">
	{call USP_TB_INCIDENCIA_DELETE(#{idIncidencia}) }
	</delete>
	<select id="obtain" parameterType="int" resultMap = "incidenciaResultMap">
	{call USP_TB_INCIDENCIA_OBTAIN(#{idIncidencia})}
	</select>
</mapper>